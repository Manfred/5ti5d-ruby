<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Ruby · Vijf Talen in Vijf Dagen</title>
    <link href="stylesheets/default.css" media="all" rel="stylesheet" type="text/css">
  </head>
  <body>
    <div id="container"><div id="inner">
      <h1>Exercises</h1>
      
      <p>
        Each exercise has a number of separate parts, you're free to choose any of the parts or
        complete them all. There are also some bonus tasks if you feel up for the challenge.
        Good luck!
      </p>
      
      <p class="help">
        If you want to look through all Ruby syntax really quickly, you can use the
        <a href="http://www.zenspider.com/Languages/Ruby/QuickRef.html">Ruby quick reference</a>.
      </p>
      
      <h3>1. Parsing HTTP headers</h3>
      
      <p>
        The goal of this exercise is to parse the headers provided in the examples directory. You
        can find the files accompanying this exercise in <tt>exercises/parsing-http-headers</tt>.
      </p>
      
      <h4>1.1. Parsing</h4>
      
      <p>
        Parse the input shown on the left and try to generate the Ruby hash shown on the right.
      </p>
      
      <div class="columns-2 code">
        <div class="column"><pre><code>Date: Sun, 25 Apr 2010 12:17:38 GMT
Server: Apache/2.2.14 (Unix)
Content-Length: 44
Content-Type: text/html</code></pre></div>
        <div class="column"><pre><code>{
  'date' => 'Sun, 25 Apr 2010 12:17:38 GMT',
  'server' => 'Apache/2.2.14 (Unix)',
  'content-length' => '44',
  'content-type' => 'text/html'
}</code></pre></div>
        <div class="clear"></div>
      </div>
      
      <h4>1.2. Reading from a file</h4>
      
      <p>
        In the <tt>examples</tt> directory you can find a number of files with examples of HTTP
        headers. Figure out how to read these files from disk and parse them. In <tt>expected</tt>
        you can find files with the same names. These files contain the ‘solutions’.
      </p>
      
      <h4>1.3. Respecting types</h4>
      
      <p>
        The header values are currently all strings. The assignment is to convert them to
        objects with a more fitting class. For instance, the ‘date’ header could be a Time object.
        Figure out how to automatically cast all the header values.
      </p>
      
      <div class="columns-2 code">
        <div class="column"><pre><code>Date: Sun, 25 Apr 2010 12:17:38 GMT
Server: Apache/2.2.14 (Unix)
Content-Length: 44
Content-Type: text/html</code></pre></div>
        <div class="column"><pre><code>{
  'date' => Time.utc(2010, 3, 25, 12, 17, 38),
  'server' => 'Apache/2.2.14 (Unix)',
  'content-length' => 44,
  'content-type' => 'text/html'
}</code></pre></div>
        <div class="clear"></div>
      </div>
      
      <p>
        You can either look at the examples or you can find out all possible header values from the
        HTTP 1.1 RFC. The relevant sections are
        <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.5">General Header Fields</a>,
        <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.3">Request Header Fields</a>,
        <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6.2">Response Header Fields</a>
      </p>
      
      <h4>1.4. Bonus: Status line</h4>
      
      <p>
        The supplied headers are in fact only part of the complete HTTP request or response. Find a
        way to also parse the status line contained in the examples and come up with a nice way to
        store them. Maybe you can define a <code>Request</code> or <code>Response</code> class?
      </p>
      
      <h4>1.5. Bonus: Writing automated tests</h4>
      
      <p>
        For extra bonus points you can try to write automated tests for your code using the examples
        and solutions. There is a short article over at Wikibooks about
        <a href="http://en.wikibooks.org/wiki/Ruby_Programming/Unit_testing">testing Ruby with test/unit</a>.
      </p>
      
      <h3>2. Drawing graphs</h3>
      
      <p>
        In this exercise the goal is to draw graphs using a PNG library. You can find the data
        files for this exercise in the <tt>drawing-graphs</tt> directory.
      </p>
      
      <div class="help">
        Install the <tt>chunky_png</tt> library, preferably with Rubygems.
        
        <pre><code>$ gem install chunky_png</code></pre>
        
        <p>
          Or otherwise install from source:
          <a href="https://github.com/wvanbergen/chunky_png/tarball/master">Chunky PNG source</a>.
        </p>
        
        <p>
          Documentation for Chunky PNG can be found on its <a href="https://github.com/wvanbergen/chunky_png/wiki">GitHub wiki</a> or in the <a href="http://rdoc.info/gems/chunky_png/1.2.0/ChunkyPNG">RDoc documentation</a>.
        </p>
      </div>
      
      <h4>2.1. Reading data files</h4>
      
      <p>
        The data files for this exercise contain integer values. Read these values from the files
        and store them as integers in an array.
      </p>
      
      <h4>2.2. Drawing lines on a canvas</h4>
      
      <p>
        Use the PNG library and create an image of 64 by 65 pixels. The image should have a black
        background and a white line running through the center from left to right. It should look
        like the image below.
      </p>
      
      <p><img src="images/drawing-graphs-line.png"></p>
      
      <h4>2.3. Drawing the values from the data file as a bar graph</h4>
      
      <p>
        Render the values read from the data files as a bar graph into a PNG. Fit the values in
        the 64 by 65 pixel image you created in the previous part of the exercise.
      </p>
      
      <p><img src="images/drawing-graphs-solution.png"></p>
      
      <h4>2.4. Bonus: Rendering an actual sine</h4>
      
      <p>
        For extra points try to render a sine using a sine function on a larger image.
      </p>
      
      <h4>2.5. Bonus: Writing automated tests</h4>
      
      <p>
        How would you go about writing automated tests for the rendered image? What are the pros
        and cons for such a solution?
      </p>
      
      <h3>3. Web app</h3>
      
      <p>
        In the last exercise we will write a small web app. The web app will allow visitors to
        post a short opinion about the course.
      </p>
      
      <p>You're welcome to use anything to accomplish this. A few possible projects of interest
        are: <a href="http://rack.rubyforge.org/">Rack</a>,
        <a href="http://rubyonrails.org/">Ruby on Rails</a>,
        <a href="http://ramaze.net/">Ramaze</a>,
        and <a href="http://www.sinatrarb.com/">Sinatra</a>.
      </p>
      
      <p>
        If you don't want to choose, you should probably pick Sinatra. It's easiest to learn. The
        <a href="http://www.sinatrarb.com/intro">Sinatra intro</a> explains how to install it.
        It's also a quick way to learn Sinatra.
      </p>
      
      <h4>3.1. Rendering a front page</h4>
      
      <p>
        Render a front page with a title when someone visits your website on the root <code>/</code>.
      </p>
      
      <p><img src="images/wa-part-1.png"></p>
      
      <h4>3.2. Adding a form</h4>
      
      <p>
        Add a form to the homepage that allows visitors to type their message. Save the message
        sent by people and store them in a database. The easiest way to set up a database is
        to probably to use
        <a href="http://sinatra-book.gittr.com/#datamapper">Datamapper with a Sqlite3 backend</a>.
        Alternatively you can use your favorite search engine to find alternatives and install
        instructions.
      </p>
      
      <pre class="help"><code>$ gem install datamapper dm-sqlite-adapter</code></pre>
      
      <p><img src="images/wa-part-2.png"></p>
      
      <h4>3.3. Showing the messages</h4>
      
      <p>
        Show all messages posted by visitors under the form.
      </p>
      
      <p><img src="images/wa-part-3.png"></p>
      
      <h4>3.4. Bonus: don't allow blank messages</h4>
      
      <p>
        If you haven't done this previously, make sure you don't allow blank posts. Show a nice
        error messages to visitors to remind them of their folly.
      </p>
      
      <p><img src="images/wa-part-4.png"></p>
      
      <h4>3.5. Bonus: writing automated tests</h4>
      
      <p>
        How do you test a web application? Do you test through the whole stack; web server, framework, application code, and rendering engine? How will the way you test impact further development?
      </p>
      <p>
        Try to write a least one functional test for your front page.
      </p>
      <p class="help">
        If you're using Sinatra, you can read <a href="http://www.sinatrarb.com/testing.html">the documentation about testing</a>.
      </p>
    </div></div>
  </body>
</html>